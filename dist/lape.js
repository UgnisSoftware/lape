!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("lape",["React"],t):"object"==typeof exports?exports.lape=t(require("react")):e.lape=t(e.React)}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.r(t);var n=new class{constructor(){this.listenersGet=[],this.listenersSet=[],this.addGet=(e=>{this.listenersGet.push(e)}),this.removeGet=(e=>{this.listenersGet=this.listenersGet.filter(t=>t!==e),console.log(this.listenersGet)}),this.triggerGet=((e,t)=>{this.listenersGet.length&&(0,this.listenersGet[this.listenersGet.length-1])(e,t)}),this.addSet=(e=>{this.listenersSet.push(e)}),this.removeSet=(e=>{this.listenersSet=this.listenersSet.filter(t=>t!==e)}),this.triggerSet=((e,t)=>{this.listenersSet.forEach(r=>r(e,t))})}},s=r(0);const i=({bestHackEver:e})=>(e(),null),o={},c=e=>{return class extends s.Component{constructor(e){super(e),this.trackProp=new WeakMap,this.trackAll=new WeakSet,this.startTracking=(()=>{n.addGet(this.trackGet),this.sideEffectPhase=!0,this.trackProp=new WeakMap}),this.trackGet=((e,t)=>{if(console.log(t),this.sideEffectPhase){if(void 0===t)return void this.trackAll.add(e);const r=this.trackProp.get(e);if(r){if(r.includes(t))return;return void r.push(t)}this.trackProp.set(e,[t])}}),this.trackSet=((e,t)=>{if(this.sideEffectPhase)throw new Error("SET cannot be called while resolving a side effect as it might trigger an infinite loop");const r=this.trackProp.get(e);(this.trackAll.has(e)||r&&r.includes(t))&&this.setState(o)}),this.stopTracking=(()=>{n.removeGet(this.trackGet),this.sideEffectPhase=!1}),n.addSet(this.trackSet)}componentWillUnmount(){n.removeSet(this.trackSet)}render(){return this.startTracking(),s.createElement(s.Fragment,null,s.createElement(e,Object.assign({},this.props)),s.createElement(i,{bestHackEver:this.stopTracking}))}}};r.d(t,"proxify",function(){return f}),r.d(t,"connect",function(){return c});const a=new WeakSet,l={get:(e,t)=>{if(0===n.listenersGet.length)return Reflect.get(e,t);const r=typeof e;if("object"===r){return Array.isArray(e)&&("symbol"==typeof t||isNaN(t))?(n.triggerGet(e),Reflect.get(e,t)):(n.triggerGet(e,t),Reflect.get(e,t))}return"string"===r||"number"===r||"boolean"===r?Reflect.get(e,t):void 0},ownKeys:e=>0===n.listenersGet.length?Reflect.ownKeys(e):(n.triggerGet(e),Reflect.ownKeys(e)),set:(e,t,r)=>("object"!=typeof r||a.has(r)||(r=f(r)),Reflect.set(e,t,r),n.triggerSet(e,t),!0)},f=e=>{if(Object.keys(e).forEach(t=>{a.has(e)||"object"==typeof e[t]&&(e[t]=f(e[t]))}),a.has(e))return e;const t=new Proxy(e,l);return a.add(t),t}}])});