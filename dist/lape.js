!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("lape",["React"],t):"object"==typeof exports?exports.lape=t(require("react")):e.lape=t(e.React)}(window,function(e){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.r(t);var i=new class{constructor(){this.listenersGet=[],this.listenersSet=[],this.addGet=(e=>{this.listenersGet.push(e)}),this.removeGet=(e=>{this.listenersGet=this.listenersGet.filter(t=>t!==e)}),this.triggerGet=((e,t)=>{this.listenersGet.length&&(0,this.listenersGet[this.listenersGet.length-1])(e,t)}),this.addSet=(e=>{this.listenersSet.push(e)}),this.removeSet=(e=>{this.listenersSet=this.listenersSet.filter(t=>t!==e)}),this.timeout=null,this.dataChanged=[],this.triggerSet=((e,t)=>{this.dataChanged.push({target:e,prop:t}),this.timeout||(this.timeout=setTimeout(()=>{this.listenersSet.forEach(e=>e(this.dataChanged)),this.timeout=null,this.dataChanged=[]},0))})}},n=r(0);const s=({bestHackEver:e})=>(e(),null),o=e=>{return class extends n.PureComponent{constructor(e){super(e),this.trackProp=new WeakMap,this.trackAll=new WeakSet,this.startTracking=(()=>{i.addGet(this.trackGet),this.sideEffectPhase=!0,this.trackProp=new WeakMap}),this.trackGet=((e,t)=>{if(this.sideEffectPhase){if(void 0===t)return void this.trackAll.add(e);const r=this.trackProp.get(e);if(r){if(r.includes(t))return;return void r.push(t)}this.trackProp.set(e,[t])}}),this.trackSet=(e=>{if(this.sideEffectPhase)throw new Error("SET cannot be called while resolving a side effect as it might trigger an infinite loop");e.forEach(({target:e,prop:t})=>{const r=this.trackProp.get(e);(this.trackAll.has(e)||r&&r.includes(t))&&this.forceUpdate()})}),this.stopTracking=(()=>{i.removeGet(this.trackGet),this.sideEffectPhase=!1}),i.addSet(this.trackSet)}componentWillUnmount(){i.removeSet(this.trackSet)}render(){return this.startTracking(),n.createElement(n.Fragment,null,n.createElement(e,Object.assign({},this.props)),n.createElement(s,{bestHackEver:this.stopTracking}))}}};r.d(t,"proxify",function(){return l}),r.d(t,"connect",function(){return o});const a=new WeakSet,c={get:(e,t)=>{if(0===i.listenersGet.length)return Reflect.get(e,t);const r=typeof e;if("object"===r){return Array.isArray(e)&&("symbol"==typeof t||isNaN(t))?(i.triggerGet(e),Reflect.get(e,t)):(i.triggerGet(e,t),Reflect.get(e,t))}return"string"===r||"number"===r||"boolean"===r?Reflect.get(e,t):void 0},ownKeys:e=>0===i.listenersGet.length?Reflect.ownKeys(e):(i.triggerGet(e),Reflect.ownKeys(e)),set:(e,t,r)=>("object"!=typeof r||a.has(r)||(r=l(r)),Reflect.set(e,t,r),i.triggerSet(e,t),!0)},l=e=>{if(Object.keys(e).forEach(t=>{a.has(e)||"object"==typeof e[t]&&(e[t]=l(e[t]))}),a.has(e))return e;const t=new Proxy(e,c);return a.add(t),t}}])});