!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define("lape",["React"],e):"object"==typeof exports?exports.lape=e(require("react")):t.lape=e(t.React)}(window,function(t){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";r.r(e);var i=new class{constructor(){this.listenersGet=[],this.listenersSet=[],this.addGet=(t=>{this.listenersGet.push(t)}),this.removeGet=(t=>{this.listenersGet=this.listenersGet.filter(e=>e!==t)}),this.triggerGet=((t,e)=>{this.listenersGet.length&&(0,this.listenersGet[this.listenersGet.length-1])(t,e)}),this.addSet=(t=>{this.listenersSet.push(t)}),this.removeSet=(t=>{this.listenersSet=this.listenersSet.filter(e=>e!==t)}),this.timeout=null,this.dataChanged=[],this.triggerSet=((t,e)=>{this.dataChanged.push({target:t,prop:e}),this.timeout||(this.timeout=setTimeout(()=>{this.listenersSet.forEach(t=>t(this.dataChanged)),this.timeout=null,this.dataChanged=[]},0))})}},s=r(0);const n=({bestHackEver:t})=>(t(),null),o={},a=t=>{return class extends s.Component{constructor(t){super(t),this.trackProp=new WeakMap,this.trackAll=new WeakSet,this.startTracking=(()=>{i.addGet(this.trackGet),this.sideEffectPhase=!0,this.trackProp=new WeakMap}),this.trackGet=((t,e)=>{if(this.sideEffectPhase){if(void 0===e)return void this.trackAll.add(t);const r=this.trackProp.get(t);if(r){if(r.includes(e))return;return void r.push(e)}this.trackProp.set(t,[e])}}),this.trackSet=(t=>{if(this.sideEffectPhase)throw new Error("SET cannot be called while resolving a side effect as it might trigger an infinite loop");t.forEach(({target:t,prop:e})=>{const r=this.trackProp.get(t);(this.trackAll.has(t)||r&&r.includes(e))&&this.setState(o)})}),this.stopTracking=(()=>{i.removeGet(this.trackGet),this.sideEffectPhase=!1}),i.addSet(this.trackSet)}componentWillUnmount(){i.removeSet(this.trackSet)}render(){return this.startTracking(),s.createElement(s.Fragment,null,s.createElement(t,Object.assign({},this.props)),s.createElement(n,{bestHackEver:this.stopTracking}))}}};r.d(e,"proxify",function(){return u}),r.d(e,"connect",function(){return a});const c=new WeakSet,l={get:(t,e)=>{if(0===i.listenersGet.length)return Reflect.get(t,e);const r=typeof t;if("object"===r){return Array.isArray(t)&&("symbol"==typeof e||isNaN(e))?(i.triggerGet(t),Reflect.get(t,e)):(i.triggerGet(t,e),Reflect.get(t,e))}return"string"===r||"number"===r||"boolean"===r?Reflect.get(t,e):void 0},ownKeys:t=>0===i.listenersGet.length?Reflect.ownKeys(t):(i.triggerGet(t),Reflect.ownKeys(t)),set:(t,e,r)=>("object"!=typeof r||c.has(r)||(r=u(r)),Reflect.set(t,e,r),i.triggerSet(t,e),!0)},u=t=>{if(Object.keys(t).forEach(e=>{c.has(t)||"object"==typeof t[e]&&(t[e]=u(t[e]))}),c.has(t))return t;const e=new Proxy(t,l);return c.add(e),e}}])});